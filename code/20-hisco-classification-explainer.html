<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.237">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Linking occupatonal hisco form 1910 to 1930</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="20-hisco-classification-explainer_files/libs/clipboard/clipboard.min.js"></script>
<script src="20-hisco-classification-explainer_files/libs/quarto-html/quarto.js"></script>
<script src="20-hisco-classification-explainer_files/libs/quarto-html/popper.min.js"></script>
<script src="20-hisco-classification-explainer_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="20-hisco-classification-explainer_files/libs/quarto-html/anchor.min.js"></script>
<link href="20-hisco-classification-explainer_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="20-hisco-classification-explainer_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="20-hisco-classification-explainer_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="20-hisco-classification-explainer_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="20-hisco-classification-explainer_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Linking occupatonal hisco form 1910 to 1930</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="purpose" class="level2">
<h2 class="anchored" data-anchor-id="purpose">Purpose</h2>
<p>This document explains the assignment of hisco and hisclass codes to the Swedish 1930 census.</p>
<p>The process has a few parts.</p>
<section id="what-we-want" class="level3">
<h3 class="anchored" data-anchor-id="what-we-want">What we want</h3>
<p>We want to assign each record in the 1930 census to a social class and and occupational class so that they are easier to work with.</p>
<p>We want at the end of this process to save a file with each of the 1930 census observations and a hisco and hisclass.</p>
<p>The intermediately generated varibles (cleaned up titles etc.) will be available as an auxiliary file.</p>
<p>(One thing that could follow later is to try and assign status and relation variables along with the hisco codes)</p>
</section>
<section id="what-we-have" class="level3">
<h3 class="anchored" data-anchor-id="what-we-have">What we have</h3>
<p>We have only the occupational title.</p>
</section>
<section id="process" class="level3">
<h3 class="anchored" data-anchor-id="process">Process</h3>
<p>We can use this title to assign an occupational hisco (used in the Swedish censuses from 1880 to 1910 by IPUMS International), then map across to a hisco code, and then a hisclass variable.</p>
<p><strong>I want to make a diagram here that shows the process</strong></p>
<p>The diagram will have a sankey structure.</p>
<p>I’m going to put all of the code in this one document, even if it is not executed on compiling.</p>
</section>
</section>
<section id="data-sources" class="level2">
<h2 class="anchored" data-anchor-id="data-sources">Data sources</h2>
<p>The first source of data is the 1930 Swedish census. This is as yet incompletely digitized, but is available fom Riksarkivet.</p>
<p>The second source of data is the 1910 Swedish census. It will be used as a source of occupational strings and occupational hisco codes.</p>
<p>The third is a crosswalk between occupational hisco (used in the Swedish censuses) and hisco (from which we can assign hisclass).</p>
<p>The fourth is a crosswalk between hisco and hisclass.</p>
</section>
<section id="process-1" class="level2">
<h2 class="anchored" data-anchor-id="process-1">Process</h2>
<section id="ingest-1930-occupations" class="level3">
<h3 class="anchored" data-anchor-id="ingest-1930-occupations">Ingest 1930 occupations</h3>
<p>The first thing we are going to do is get in the 1930 census data and clean it up so that we can match across to the 1910 census data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/augmented/df_1930_augmented.rds"</span>))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>df_1930 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we need only the id and occupation variables</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, yrke) <span class="sc">%&gt;%</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this makes a copy of the original column, that we then modify</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_copy =</span> yrke,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_to_lower</span>(yrke),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We create a column for former, indicated by fd. We remove this from the original column.</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># we can use this later to improve the hisclass classification</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">flag_fd =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">.d|^fd| fd|f d</span><span class="sc">\\</span><span class="st">.| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. d$"</span>),<span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">.d|^fd| fd|f d</span><span class="sc">\\</span><span class="st">.| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. d$"</span>),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># flag for only doing the occupation temporarily</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">flag_fn =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n"</span>),<span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n"</span>),</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a column for place of work</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_pow =</span> <span class="fu">str_extract</span>(yrke, <span class="st">" hos .*| vid .*| i .*| på.*| å .*| h</span><span class="sc">\\</span><span class="st">. "</span>),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">" hos .*| vid .*| i .*| på.*| å .*| h</span><span class="sc">\\</span><span class="st">. "</span>),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a column for former occupation</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_f_occ =</span> <span class="fu">str_extract</span>(yrke, <span class="st">" f</span><span class="sc">\\</span><span class="st">..*"</span>),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tidy up the remaining occpations</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">" f</span><span class="sc">\\</span><span class="st">..*"</span>),</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">" fa da"</span>),</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"^fa | fa$| fa "</span>),</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"^fada | fada$| fada "</span>),</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"^da | da$| da "</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flag_for_multi_occs =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(yrke_copy, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">.d$|^fd$| fd$|f d</span><span class="sc">\\</span><span class="st">.$| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">. d$| f</span><span class="sc">\\</span><span class="st">.$"</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">&amp;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(yrke_copy, <span class="st">" [A-Z].*"</span>), <span class="at">yes =</span> <span class="cn">TRUE</span>, <span class="at">no =</span> <span class="cn">FALSE</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_clean =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">.d$|^fd$| fd$|f d</span><span class="sc">\\</span><span class="st">.$| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">. d$| f</span><span class="sc">\\</span><span class="st">.$"</span>)),</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_f_occ =</span> <span class="fu">case_when</span>(</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>      flag_for_multi_occs <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">word</span>(yrke_clean, <span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">case_when</span>(</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>      flag_for_multi_occs <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">str_remove</span>(yrke, <span class="st">" .*"</span>),</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yrke</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>yrke_clean) <span class="sc">%&gt;%</span> </span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove numbers that begin a word</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"[0-9]."</span>),</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"[:punct:]"</span>),</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_to_lower</span>(yrke),</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_squish</span>(yrke)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tidy up funny letters</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yrke_1 =</span> <span class="fu">word</span>(yrke, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="clean-up-1910-census-data" class="level3">
<h3 class="anchored" data-anchor-id="clean-up-1910-census-data">Clean up 1910 census data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ipumsr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df_1910 <span class="ot">&lt;-</span> ipumsr<span class="sc">::</span><span class="fu">read_ipums_micro</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ddi =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/ipums/ipumsi_00006.xml"</span>),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/ipums/ipumsi_00006.dat.gz"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>df_1910 <span class="ot">&lt;-</span> df_1910 <span class="sc">%&gt;%</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">1910</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>df_1910 <span class="ot">&lt;-</span> df_1910 <span class="sc">%&gt;%</span> </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(OCCHISCO, OCCSTRNG) <span class="sc">%&gt;%</span> </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">occ_hisco =</span> <span class="fu">as.numeric</span>(OCCHISCO)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(occ_hisco, <span class="at">yrke =</span> OCCSTRNG)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>df_1910 <span class="ot">&lt;-</span> df_1910 <span class="sc">%&gt;%</span> </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this makes a copy of the original column, that we then modify</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_copy =</span> yrke,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_to_lower</span>(yrke),</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We create a column for former, indicated by fd. We remove this from the original column.</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># we can use this later to improve the hisclass classification</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">flag_fd =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">.d|^fd| fd|f d</span><span class="sc">\\</span><span class="st">.| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. d$"</span>),<span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">.d|^fd| fd|f d</span><span class="sc">\\</span><span class="st">.| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. d$"</span>),</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># flag for only doing the occupation temporarily</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">flag_fn =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n"</span>),<span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n</span><span class="sc">\\</span><span class="st">.|f</span><span class="sc">\\</span><span class="st">. n"</span>),</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a column for place of work</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_pow =</span> <span class="fu">str_extract</span>(yrke, <span class="st">" hos .*| vid .*| i .*| på.*| å .*| h</span><span class="sc">\\</span><span class="st">. "</span>),</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">" hos .*| vid .*| i .*| på.*| å .*| h</span><span class="sc">\\</span><span class="st">. "</span>),</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a column for former occupation</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_f_occ =</span> <span class="fu">str_extract</span>(yrke, <span class="st">" f</span><span class="sc">\\</span><span class="st">..*"</span>),</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tidy up the remaining occpations</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">" f</span><span class="sc">\\</span><span class="st">..*"</span>),</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">" fa da"</span>),</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"^fa | fa$| fa "</span>),</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"^fada | fada$| fada "</span>),</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"^da | da$| da "</span>)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flag_for_multi_occs =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(yrke_copy, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">.d$|^fd$| fd$|f d</span><span class="sc">\\</span><span class="st">.$| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">. d$| f</span><span class="sc">\\</span><span class="st">.$"</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">&amp;</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(yrke_copy, <span class="st">" [A-Z].*"</span>), <span class="at">yes =</span> <span class="cn">TRUE</span>, <span class="at">no =</span> <span class="cn">FALSE</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_clean =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove</span>(yrke, <span class="st">"f</span><span class="sc">\\</span><span class="st">.d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">.d$|^fd$| fd$|f d</span><span class="sc">\\</span><span class="st">.$| f</span><span class="sc">\\</span><span class="st">. d</span><span class="sc">\\</span><span class="st">.$|f</span><span class="sc">\\</span><span class="st">. d$| f</span><span class="sc">\\</span><span class="st">.$"</span>)),</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke_f_occ =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>      flag_for_multi_occs <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">word</span>(yrke_clean, <span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>      flag_for_multi_occs <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">str_remove</span>(yrke, <span class="st">" .*"</span>),</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yrke</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>yrke_clean) <span class="sc">%&gt;%</span> </span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove numbers that begin a word</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"[0-9]."</span>),</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_remove_all</span>(yrke, <span class="st">"[:punct:]"</span>),</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_to_lower</span>(yrke),</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="fu">str_squish</span>(yrke)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tidy up funny letters</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yrke_1 =</span> <span class="fu">word</span>(yrke, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We want a set of distinct occupations to match against.</p>
<p>Let’s check if there are any instances of one title mapping to multiple occupational hiscos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df_1910_duplicates <span class="ot">&lt;-</span> df_1910 <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(yrke, occ_hisco, <span class="at">sort =</span> T, <span class="at">name =</span> <span class="st">"n_yrke_with_occ_hisco"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(yrke, <span class="at">name =</span> <span class="st">"n_diff_occ_hiscos"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_diff_occ_hiscos))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="dxqsgshfac" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#dxqsgshfac) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#dxqsgshfac) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#dxqsgshfac) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#dxqsgshfac) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#dxqsgshfac) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#dxqsgshfac) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#dxqsgshfac) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#dxqsgshfac) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#dxqsgshfac) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#dxqsgshfac) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#dxqsgshfac) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#dxqsgshfac) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#dxqsgshfac) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dxqsgshfac) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#dxqsgshfac) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#dxqsgshfac) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dxqsgshfac) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#dxqsgshfac) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dxqsgshfac) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#dxqsgshfac) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dxqsgshfac) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#dxqsgshfac) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dxqsgshfac) .gt_left {
  text-align: left;
}

:where(#dxqsgshfac) .gt_center {
  text-align: center;
}

:where(#dxqsgshfac) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#dxqsgshfac) .gt_font_normal {
  font-weight: normal;
}

:where(#dxqsgshfac) .gt_font_bold {
  font-weight: bold;
}

:where(#dxqsgshfac) .gt_font_italic {
  font-style: italic;
}

:where(#dxqsgshfac) .gt_super {
  font-size: 65%;
}

:where(#dxqsgshfac) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#dxqsgshfac) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#dxqsgshfac) .gt_indent_1 {
  text-indent: 5px;
}

:where(#dxqsgshfac) .gt_indent_2 {
  text-indent: 10px;
}

:where(#dxqsgshfac) .gt_indent_3 {
  text-indent: 15px;
}

:where(#dxqsgshfac) .gt_indent_4 {
  text-indent: 20px;
}

:where(#dxqsgshfac) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="4" class="gt_heading gt_title gt_font_normal" style="">Titles assigned to multiple codes</td>
    </tr>
    <tr>
      <td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">The case of gårdsägare</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Code</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Number of records with this code</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Total different codes for this title</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_right">2661</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">41010</td>
<td class="gt_row gt_right">35</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">95420</td>
<td class="gt_row gt_right">32</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">99120</td>
<td class="gt_row gt_right">15</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">58410</td>
<td class="gt_row gt_right">13</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">99150</td>
<td class="gt_row gt_right">11</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">23170</td>
<td class="gt_row gt_right">10</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">73200</td>
<td class="gt_row gt_right">10</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">95120</td>
<td class="gt_row gt_right">9</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">79120</td>
<td class="gt_row gt_right">8</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">22120</td>
<td class="gt_row gt_right">5</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">99200</td>
<td class="gt_row gt_right">5</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">58430</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">77610</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">80100</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">93120</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">98510</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">14120</td>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">22190</td>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_right">102</td></tr>
    <tr><td class="gt_row gt_left">gårdsägare</td>
<td class="gt_row gt_right">23120</td>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_right">102</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>So we can see that for the title gårdsägare, there are 2661 instances in the 1910 census of the title being assigned the occupational hisco code 6.111^{4}, for farmer.</p>
<p>In the instances where there are multiple occupational hisco codes assignd to one occupation, we will use a simple rule.</p>
<p>We count the number of records assigned each occupational hisco within each title, take the top code and keep it as the assigned code.</p>
<p><strong>(If the top code is 99999, we can assign it manually later.)</strong></p>
<p>We implement the rule below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_1910 <span class="ot">&lt;-</span> df_1910_duplicates <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yrke) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_yrke_with_occ_hisco)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">index =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(index <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yrke, occ_hisco)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<p>Now there are just 54 848 records.</p>
</section>
</section>
<section id="iterative-matching-for-occupational-hisco-codes" class="level2">
<h2 class="anchored" data-anchor-id="iterative-matching-for-occupational-hisco-codes">Iterative matching for occupational hisco codes</h2>
<section id="matching-round-1" class="level3">
<h3 class="anchored" data-anchor-id="matching-round-1">Matching round 1</h3>
<p>The matching of 1930 titles to occupational hisco codes requires at least three steps.</p>
<p>The first is the most simple to describe. It is simply an exact match between the titles in 1910 and the titles in 1930.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_1930_joined_1 <span class="ot">&lt;-</span> df_1930 <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, yrke) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(df_1910)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
</div>
<div class="cell">

</div>
<p>So there are 2 109 901 records from 1930 that get a code (including missing) after this first match, out of 2 198 182. This is 95.98% of the total.</p>
</section>
<section id="matching-round-2" class="level3">
<h3 class="anchored" data-anchor-id="matching-round-2">Matching round 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>still_remain <span class="ot">&lt;-</span> df_1930 <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  scales<span class="sc">::</span><span class="fu">number</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>remaining_titles <span class="ot">&lt;-</span> df_1930 <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(yrke) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  scales<span class="sc">::</span><span class="fu">number</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
</div>
<p>So 88 281 observations remain without any occupational hisco, with 45 135 different titles.</p>
<p>The most common occupations that are not yet matched are:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df_1930 <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, yrke) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(yrke, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Unmatched titles"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"After first matching"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">yrke =</span> <span class="st">"Title"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">n =</span> <span class="st">"Number of records"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
<div class="cell-output-display">

<div id="sohlzdmevq" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#sohlzdmevq) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#sohlzdmevq) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#sohlzdmevq) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#sohlzdmevq) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#sohlzdmevq) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#sohlzdmevq) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#sohlzdmevq) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#sohlzdmevq) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#sohlzdmevq) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#sohlzdmevq) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#sohlzdmevq) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#sohlzdmevq) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#sohlzdmevq) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#sohlzdmevq) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#sohlzdmevq) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#sohlzdmevq) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#sohlzdmevq) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#sohlzdmevq) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#sohlzdmevq) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#sohlzdmevq) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#sohlzdmevq) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#sohlzdmevq) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#sohlzdmevq) .gt_left {
  text-align: left;
}

:where(#sohlzdmevq) .gt_center {
  text-align: center;
}

:where(#sohlzdmevq) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#sohlzdmevq) .gt_font_normal {
  font-weight: normal;
}

:where(#sohlzdmevq) .gt_font_bold {
  font-weight: bold;
}

:where(#sohlzdmevq) .gt_font_italic {
  font-style: italic;
}

:where(#sohlzdmevq) .gt_super {
  font-size: 65%;
}

:where(#sohlzdmevq) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#sohlzdmevq) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#sohlzdmevq) .gt_indent_1 {
  text-indent: 5px;
}

:where(#sohlzdmevq) .gt_indent_2 {
  text-indent: 10px;
}

:where(#sohlzdmevq) .gt_indent_3 {
  text-indent: 15px;
}

:where(#sohlzdmevq) .gt_indent_4 {
  text-indent: 20px;
}

:where(#sohlzdmevq) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="2" class="gt_heading gt_title gt_font_normal" style="">Unmatched titles</td>
    </tr>
    <tr>
      <td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">After first matching</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Number of records</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">konfektionssömmerska</td>
<td class="gt_row gt_right">747</td></tr>
    <tr><td class="gt_row gt_left">bilreparatör</td>
<td class="gt_row gt_right">548</td></tr>
    <tr><td class="gt_row gt_left">hushåll</td>
<td class="gt_row gt_right">349</td></tr>
    <tr><td class="gt_row gt_left">jordbruksarbetare skogsarbetare</td>
<td class="gt_row gt_right">338</td></tr>
    <tr><td class="gt_row gt_left">nomadlapp</td>
<td class="gt_row gt_right">325</td></tr>
    <tr><td class="gt_row gt_left">jordbruksarbete</td>
<td class="gt_row gt_right">321</td></tr>
    <tr><td class="gt_row gt_left">hembiträde hemmadotter</td>
<td class="gt_row gt_right">316</td></tr>
    <tr><td class="gt_row gt_left">jordbruksarbetare åt fadern</td>
<td class="gt_row gt_right">284</td></tr>
    <tr><td class="gt_row gt_left">jordbrukardräng</td>
<td class="gt_row gt_right">279</td></tr>
    <tr><td class="gt_row gt_left">skogsarbetare jordbruksarbetare</td>
<td class="gt_row gt_right">256</td></tr>
    <tr><td class="gt_row gt_left">hemmadotter hembiträde</td>
<td class="gt_row gt_right">252</td></tr>
    <tr><td class="gt_row gt_left">textilarbetare vävare</td>
<td class="gt_row gt_right">250</td></tr>
    <tr><td class="gt_row gt_left">bilmontör</td>
<td class="gt_row gt_right">247</td></tr>
    <tr><td class="gt_row gt_left">textilarbetare väv</td>
<td class="gt_row gt_right">245</td></tr>
    <tr><td class="gt_row gt_left">hushållshjälp</td>
<td class="gt_row gt_right">237</td></tr>
    <tr><td class="gt_row gt_left">lägenhetsägare jordbruksarbetare</td>
<td class="gt_row gt_right">234</td></tr>
    <tr><td class="gt_row gt_left">skogsarbetare flottningsarbetare</td>
<td class="gt_row gt_right">212</td></tr>
    <tr><td class="gt_row gt_left">arbetslös</td>
<td class="gt_row gt_right">198</td></tr>
    <tr><td class="gt_row gt_left">ackumulatorarbetare</td>
<td class="gt_row gt_right">193</td></tr>
    <tr><td class="gt_row gt_left">varubud</td>
<td class="gt_row gt_right">185</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>So there are two main types of titles: new jobs (e.g.&nbsp;bilreparatör) and multiple occupations e.g.&nbsp;(jordbruksarbetare skogsarbetare).</p>
<p>To overcome the second type we can just take the first word from the title and match again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_1930_joined_2 <span class="ot">&lt;-</span> df_1930 <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">words =</span> <span class="fu">str_count</span>(yrke, <span class="st">"</span><span class="sc">\\</span><span class="st">w+"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yrke_1 =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove</span>(yrke, <span class="st">" .*"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(df_1910, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"yrke_1"</span> <span class="ot">=</span> <span class="st">"yrke"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df_1930_joined_2 <span class="ot">&lt;-</span> df_1930_joined_2 <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, yrke, occ_hisco)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<p>Having matched again, we get another 58 479 matches.</p>
<p>Here we are assuming that the first listed occupation is the most important.</p>
<p><strong>(We can come back and get the second occupation too if it seems worthwhile)</strong></p>
</section>
<section id="matching-round-3" class="level3">
<h3 class="anchored" data-anchor-id="matching-round-3">Matching round 3</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"
Joining, by = "yrke"</code></pre>
</div>
</div>
<p>Now we are left with 29 802 records, with 13 255 distinct titles.</p>
<p>The most common ones are shown in the table below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df_1930 <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">words =</span> <span class="fu">str_count</span>(yrke, <span class="st">"</span><span class="sc">\\</span><span class="st">w+"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yrke_1 =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove</span>(yrke, <span class="st">" .*"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"yrke_1"</span> <span class="ot">=</span> <span class="st">"yrke"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(yrke, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Unmatched titles"</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"After second matching"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">yrke =</span> <span class="st">"Title"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">n =</span> <span class="st">"Number of records"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
<div class="cell-output-display">

<div id="howibgotri" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#howibgotri) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#howibgotri) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#howibgotri) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#howibgotri) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#howibgotri) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#howibgotri) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#howibgotri) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#howibgotri) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#howibgotri) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#howibgotri) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#howibgotri) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#howibgotri) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#howibgotri) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#howibgotri) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#howibgotri) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#howibgotri) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#howibgotri) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#howibgotri) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#howibgotri) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#howibgotri) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#howibgotri) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#howibgotri) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#howibgotri) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#howibgotri) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#howibgotri) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#howibgotri) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#howibgotri) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#howibgotri) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#howibgotri) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#howibgotri) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#howibgotri) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#howibgotri) .gt_left {
  text-align: left;
}

:where(#howibgotri) .gt_center {
  text-align: center;
}

:where(#howibgotri) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#howibgotri) .gt_font_normal {
  font-weight: normal;
}

:where(#howibgotri) .gt_font_bold {
  font-weight: bold;
}

:where(#howibgotri) .gt_font_italic {
  font-style: italic;
}

:where(#howibgotri) .gt_super {
  font-size: 65%;
}

:where(#howibgotri) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#howibgotri) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#howibgotri) .gt_indent_1 {
  text-indent: 5px;
}

:where(#howibgotri) .gt_indent_2 {
  text-indent: 10px;
}

:where(#howibgotri) .gt_indent_3 {
  text-indent: 15px;
}

:where(#howibgotri) .gt_indent_4 {
  text-indent: 20px;
}

:where(#howibgotri) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="2" class="gt_heading gt_title gt_font_normal" style="">Unmatched titles</td>
    </tr>
    <tr>
      <td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">After second matching</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Number of records</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">konfektionssömmerska</td>
<td class="gt_row gt_right">747</td></tr>
    <tr><td class="gt_row gt_left">bilreparatör</td>
<td class="gt_row gt_right">548</td></tr>
    <tr><td class="gt_row gt_left">hushåll</td>
<td class="gt_row gt_right">349</td></tr>
    <tr><td class="gt_row gt_left">nomadlapp</td>
<td class="gt_row gt_right">325</td></tr>
    <tr><td class="gt_row gt_left">jordbruksarbete</td>
<td class="gt_row gt_right">321</td></tr>
    <tr><td class="gt_row gt_left">jordbrukardräng</td>
<td class="gt_row gt_right">279</td></tr>
    <tr><td class="gt_row gt_left">bilmontör</td>
<td class="gt_row gt_right">247</td></tr>
    <tr><td class="gt_row gt_left">hushållshjälp</td>
<td class="gt_row gt_right">237</td></tr>
    <tr><td class="gt_row gt_left">arbetslös</td>
<td class="gt_row gt_right">198</td></tr>
    <tr><td class="gt_row gt_left">ackumulatorarbetare</td>
<td class="gt_row gt_right">193</td></tr>
    <tr><td class="gt_row gt_left">varubud</td>
<td class="gt_row gt_right">185</td></tr>
    <tr><td class="gt_row gt_left">kapital</td>
<td class="gt_row gt_right">176</td></tr>
    <tr><td class="gt_row gt_left">postassistent</td>
<td class="gt_row gt_right">168</td></tr>
    <tr><td class="gt_row gt_left">trafikchaufför</td>
<td class="gt_row gt_right">166</td></tr>
    <tr><td class="gt_row gt_left">kolonist</td>
<td class="gt_row gt_right">154</td></tr>
    <tr><td class="gt_row gt_left">kraftverksarbetare</td>
<td class="gt_row gt_right">151</td></tr>
    <tr><td class="gt_row gt_left">anläggningsarbetare</td>
<td class="gt_row gt_right">148</td></tr>
    <tr><td class="gt_row gt_left">småbruksarrendator</td>
<td class="gt_row gt_right">137</td></tr>
    <tr><td class="gt_row gt_left">hemhjälp</td>
<td class="gt_row gt_right">127</td></tr>
    <tr><td class="gt_row gt_left">trafikbiträde</td>
<td class="gt_row gt_right">127</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df_1930 <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">words =</span> <span class="fu">str_count</span>(yrke, <span class="st">"</span><span class="sc">\\</span><span class="st">w+"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yrke_1 =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove</span>(yrke, <span class="st">" .*"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"yrke_1"</span> <span class="ot">=</span> <span class="st">"yrke"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(yrke)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29,802 × 12
         id yrke    kon   yrke_…¹ flag_fd flag_fn yrke_…² yrke_…³ flag_…⁴ yrke_1
      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;lgl&gt;   &lt;lgl&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;lgl&gt;   &lt;chr&gt; 
 1 29170695 linnef… K     Linnef… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   linne…
 2 29170719 husger… M     Husger… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   husge…
 3 29170749 slotts… M     Slotts… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   slott…
 4 29170752 slotts… M     Slotts… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   slott…
 5 29170754 slotts… K     Slotts… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   slott…
 6 29170811 expedi… M     Expedi… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   exped…
 7 29170816 brevbä… M     Brevbä… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   brevb…
 8 29170835 tryckb… M     Tryckb… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   tryck…
 9 29170849 trapps… K     Trapps… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   trapp…
10 29170867 smides… M     Smides… FALSE   FALSE   &lt;NA&gt;    &lt;NA&gt;    FALSE   smide…
# … with 29,792 more rows, 2 more variables: words &lt;int&gt;, n &lt;int&gt;, and
#   abbreviated variable names ¹​yrke_copy, ²​yrke_pow, ³​yrke_f_occ,
#   ⁴​flag_for_multi_occs</code></pre>
</div>
</div>
<p>We will do some of these manually. We get to 44 percent of the remaning observations by doing 500. Let’s see how we go.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df_1930 <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">words =</span> <span class="fu">str_count</span>(yrke, <span class="st">"</span><span class="sc">\\</span><span class="st">w+"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yrke_1 =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove</span>(yrke, <span class="st">" .*"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_1910, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"yrke_1"</span> <span class="ot">=</span> <span class="st">"yrke"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(yrke, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">rn =</span> <span class="fu">row_number</span>() <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">gn =</span> rn <span class="sc">-</span> rn <span class="sc">%%</span> <span class="dv">50</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gn) <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_obs =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">gn =</span> gn <span class="sc">+</span> <span class="dv">50</span>,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct =</span> total_obs <span class="sc">/</span> <span class="dv">29802</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_cumsum =</span> <span class="fu">cumsum</span>(pct),</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">flag =</span> <span class="fu">case_when</span>(</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>      gn <span class="sc">==</span> <span class="dv">500</span> <span class="sc">~</span> <span class="cn">TRUE</span>,</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">FALSE</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">30</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gn, pct_cumsum, <span class="at">fill =</span> flag)) <span class="sc">+</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of next occupations"</span>,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percent of observations that get assinged a hisco"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "yrke"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="20-hisco-classification-explainer_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="completition-rate" class="level3">
<h3 class="anchored" data-anchor-id="completition-rate">Completition rate</h3>
<p>How much of the 1930 census remains after our three matches?</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="20-hisco-classification-explainer_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="quality-checking" class="level3">
<h3 class="anchored" data-anchor-id="quality-checking">Quality checking</h3>
<p>We are going to write out the 100 most common occupations and another 100 from elsewhere in the distribution and check by hand whether the crosswalk from the 1910 census is of high enough quality.</p>
<div class="cell">

</div>
<p>The top 100 occupations and corresponding codes are</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df_1930_joined_intermediate <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(rank, <span class="at">.before =</span> yrke) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Most common occupational titles and codes"</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"In the 1930 census"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank =</span> <span class="st">"Rank"</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="st">"Title"</span>,</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">occ_hisco =</span> <span class="st">"Code"</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">napp_title =</span> <span class="st">"NAPP Title"</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="hkbbpcfnga" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#hkbbpcfnga) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#hkbbpcfnga) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#hkbbpcfnga) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#hkbbpcfnga) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#hkbbpcfnga) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#hkbbpcfnga) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#hkbbpcfnga) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#hkbbpcfnga) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#hkbbpcfnga) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#hkbbpcfnga) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#hkbbpcfnga) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#hkbbpcfnga) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#hkbbpcfnga) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hkbbpcfnga) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#hkbbpcfnga) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#hkbbpcfnga) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hkbbpcfnga) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#hkbbpcfnga) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hkbbpcfnga) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#hkbbpcfnga) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hkbbpcfnga) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#hkbbpcfnga) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hkbbpcfnga) .gt_left {
  text-align: left;
}

:where(#hkbbpcfnga) .gt_center {
  text-align: center;
}

:where(#hkbbpcfnga) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#hkbbpcfnga) .gt_font_normal {
  font-weight: normal;
}

:where(#hkbbpcfnga) .gt_font_bold {
  font-weight: bold;
}

:where(#hkbbpcfnga) .gt_font_italic {
  font-style: italic;
}

:where(#hkbbpcfnga) .gt_super {
  font-size: 65%;
}

:where(#hkbbpcfnga) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#hkbbpcfnga) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#hkbbpcfnga) .gt_indent_1 {
  text-indent: 5px;
}

:where(#hkbbpcfnga) .gt_indent_2 {
  text-indent: 10px;
}

:where(#hkbbpcfnga) .gt_indent_3 {
  text-indent: 15px;
}

:where(#hkbbpcfnga) .gt_indent_4 {
  text-indent: 20px;
}

:where(#hkbbpcfnga) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="4" class="gt_heading gt_title gt_font_normal" style="">Most common occupational titles and codes</td>
    </tr>
    <tr>
      <td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">In the 1930 census</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Rank</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Code</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">NAPP Title</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">1</td>
<td class="gt_row gt_left"></td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">hemmansägare</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">3</td>
<td class="gt_row gt_left">jordbruksarbetare</td>
<td class="gt_row gt_right">62110</td>
<td class="gt_row gt_left">Farm workers, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">4</td>
<td class="gt_row gt_left">hemmadotter</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">5</td>
<td class="gt_row gt_left">tjänarinna</td>
<td class="gt_row gt_right">54030</td>
<td class="gt_row gt_left">Personal servants and valets</td></tr>
    <tr><td class="gt_row gt_right">6</td>
<td class="gt_row gt_left">hembiträde</td>
<td class="gt_row gt_right">54020</td>
<td class="gt_row gt_left">House servants nfs and maids</td></tr>
    <tr><td class="gt_row gt_right">7</td>
<td class="gt_row gt_left">hushållerska</td>
<td class="gt_row gt_right">52090</td>
<td class="gt_row gt_left">Other housekeeping service supervisors</td></tr>
    <tr><td class="gt_row gt_right">8</td>
<td class="gt_row gt_left">skogsarbetare</td>
<td class="gt_row gt_right">63120</td>
<td class="gt_row gt_left">Lumbermen, loggers and kindred workers</td></tr>
    <tr><td class="gt_row gt_right">9</td>
<td class="gt_row gt_left">arrendator</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">10</td>
<td class="gt_row gt_left">hemmason</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">11</td>
<td class="gt_row gt_left">sjöman</td>
<td class="gt_row gt_right">98120</td>
<td class="gt_row gt_left">Seamen</td></tr>
    <tr><td class="gt_row gt_right">12</td>
<td class="gt_row gt_left">sömmerska</td>
<td class="gt_row gt_right">79530</td>
<td class="gt_row gt_left">Sewers and sewing machine operators</td></tr>
    <tr><td class="gt_row gt_right">13</td>
<td class="gt_row gt_left">dräng</td>
<td class="gt_row gt_right">62110</td>
<td class="gt_row gt_left">Farm workers, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">14</td>
<td class="gt_row gt_left">lägenhetsägare</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">15</td>
<td class="gt_row gt_left">arbetare</td>
<td class="gt_row gt_right">99150</td>
<td class="gt_row gt_left">Worker nfs</td></tr>
    <tr><td class="gt_row gt_right">16</td>
<td class="gt_row gt_left">hemmansägareänka</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">17</td>
<td class="gt_row gt_left">torpare</td>
<td class="gt_row gt_right">61115</td>
<td class="gt_row gt_left">Husbandmen or cottars</td></tr>
    <tr><td class="gt_row gt_right">18</td>
<td class="gt_row gt_left">grovarbetare</td>
<td class="gt_row gt_right">99120</td>
<td class="gt_row gt_left">Labourers nfs</td></tr>
    <tr><td class="gt_row gt_right">19</td>
<td class="gt_row gt_left">handelsbiträde</td>
<td class="gt_row gt_right">45130</td>
<td class="gt_row gt_left">Clerks in shops and stores</td></tr>
    <tr><td class="gt_row gt_right">20</td>
<td class="gt_row gt_left">snickare</td>
<td class="gt_row gt_right">95420</td>
<td class="gt_row gt_left">Carpenters</td></tr>
    <tr><td class="gt_row gt_right">21</td>
<td class="gt_row gt_left">chaufför</td>
<td class="gt_row gt_right">98510</td>
<td class="gt_row gt_left">Drivers, nec</td></tr>
    <tr><td class="gt_row gt_right">22</td>
<td class="gt_row gt_left">husmor</td>
<td class="gt_row gt_right">52090</td>
<td class="gt_row gt_left">Other housekeeping service supervisors</td></tr>
    <tr><td class="gt_row gt_right">23</td>
<td class="gt_row gt_left">textilarbetare</td>
<td class="gt_row gt_right">75000</td>
<td class="gt_row gt_left">Textile workers, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">24</td>
<td class="gt_row gt_left">skomakare</td>
<td class="gt_row gt_right">80100</td>
<td class="gt_row gt_left">Boot and shoe makers and repairers</td></tr>
    <tr><td class="gt_row gt_right">25</td>
<td class="gt_row gt_left">fiskare</td>
<td class="gt_row gt_right">64100</td>
<td class="gt_row gt_left">Fishermen</td></tr>
    <tr><td class="gt_row gt_right">26</td>
<td class="gt_row gt_left">sågverksarbetare</td>
<td class="gt_row gt_right">73200</td>
<td class="gt_row gt_left">Sawyers and other titled wood/sawmill operatives</td></tr>
    <tr><td class="gt_row gt_right">27</td>
<td class="gt_row gt_left">biträde</td>
<td class="gt_row gt_right">99420</td>
<td class="gt_row gt_left">Assistants nfs</td></tr>
    <tr><td class="gt_row gt_right">28</td>
<td class="gt_row gt_left">stenarbetare</td>
<td class="gt_row gt_right">71200</td>
<td class="gt_row gt_left">Mineral or stone treaters</td></tr>
    <tr><td class="gt_row gt_right">29</td>
<td class="gt_row gt_left">stenhuggare</td>
<td class="gt_row gt_right">82000</td>
<td class="gt_row gt_left">Stone carvers or cutters and stone yard workers</td></tr>
    <tr><td class="gt_row gt_right">30</td>
<td class="gt_row gt_left">byggnadssnickare</td>
<td class="gt_row gt_right">95420</td>
<td class="gt_row gt_left">Carpenters</td></tr>
    <tr><td class="gt_row gt_right">31</td>
<td class="gt_row gt_left">kontorist</td>
<td class="gt_row gt_right">39310</td>
<td class="gt_row gt_left">Office clerks, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">32</td>
<td class="gt_row gt_left">understödstagare</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">33</td>
<td class="gt_row gt_left">studerande</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">34</td>
<td class="gt_row gt_left">statdräng</td>
<td class="gt_row gt_right">62110</td>
<td class="gt_row gt_left">Farm workers, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">35</td>
<td class="gt_row gt_left">fabriksarbetare</td>
<td class="gt_row gt_right">99200</td>
<td class="gt_row gt_left">Factory labourers (unspecified)</td></tr>
    <tr><td class="gt_row gt_right">36</td>
<td class="gt_row gt_left">handlande</td>
<td class="gt_row gt_right">41010</td>
<td class="gt_row gt_left">Dealer, merchant etc. (Wholesale and retail trade)</td></tr>
    <tr><td class="gt_row gt_right">37</td>
<td class="gt_row gt_left">målare</td>
<td class="gt_row gt_right">93120</td>
<td class="gt_row gt_left">Painters, construction</td></tr>
    <tr><td class="gt_row gt_right">38</td>
<td class="gt_row gt_left">småskollärarinna</td>
<td class="gt_row gt_right">13230</td>
<td class="gt_row gt_left">Teachers (primary)</td></tr>
    <tr><td class="gt_row gt_right">39</td>
<td class="gt_row gt_left">jordarbetare</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">40</td>
<td class="gt_row gt_left">byggnadsarbetare</td>
<td class="gt_row gt_right">95910</td>
<td class="gt_row gt_left">Construction workers nec</td></tr>
    <tr><td class="gt_row gt_right">41</td>
<td class="gt_row gt_left">skräddare</td>
<td class="gt_row gt_right">79120</td>
<td class="gt_row gt_left">Tailors and tailoresses</td></tr>
    <tr><td class="gt_row gt_right">42</td>
<td class="gt_row gt_left">snickeriarbetare</td>
<td class="gt_row gt_right">95420</td>
<td class="gt_row gt_left">Carpenters</td></tr>
    <tr><td class="gt_row gt_right">43</td>
<td class="gt_row gt_left">smed</td>
<td class="gt_row gt_right">83120</td>
<td class="gt_row gt_left">Blacksmiths</td></tr>
    <tr><td class="gt_row gt_right">44</td>
<td class="gt_row gt_left">hushållsbiträde</td>
<td class="gt_row gt_right">54020</td>
<td class="gt_row gt_left">House servants nfs and maids</td></tr>
    <tr><td class="gt_row gt_right">45</td>
<td class="gt_row gt_left">hushållsarbetare</td>
<td class="gt_row gt_right">54020</td>
<td class="gt_row gt_left">House servants nfs and maids</td></tr>
    <tr><td class="gt_row gt_right">46</td>
<td class="gt_row gt_left">ladugårdskarl</td>
<td class="gt_row gt_right">62110</td>
<td class="gt_row gt_left">Farm workers, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">47</td>
<td class="gt_row gt_left">lantbrukare</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">48</td>
<td class="gt_row gt_left">vägarbetare</td>
<td class="gt_row gt_right">97410</td>
<td class="gt_row gt_left">Navvy, excavator and diggers, nfs</td></tr>
    <tr><td class="gt_row gt_right">49</td>
<td class="gt_row gt_left">trädgårdsmästare</td>
<td class="gt_row gt_right">62740</td>
<td class="gt_row gt_left">Landscape gardeners</td></tr>
    <tr><td class="gt_row gt_right">50</td>
<td class="gt_row gt_left">änka</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The 100 occupations drawn at random are</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">234</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>df_1930_joined_intermediate <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(rank, <span class="at">.before =</span> yrke) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"100 other occupational titles and codes"</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"In the 1930 census"</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank =</span> <span class="st">"Rank"</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">yrke =</span> <span class="st">"Title"</span>,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">occ_hisco =</span> <span class="st">"Code"</span>,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">napp_title =</span> <span class="st">"NAPP Title"</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="ibkycedqba" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ibkycedqba) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ibkycedqba) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ibkycedqba) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ibkycedqba) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ibkycedqba) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ibkycedqba) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ibkycedqba) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ibkycedqba) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ibkycedqba) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ibkycedqba) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ibkycedqba) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ibkycedqba) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ibkycedqba) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ibkycedqba) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ibkycedqba) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ibkycedqba) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ibkycedqba) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ibkycedqba) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ibkycedqba) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ibkycedqba) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ibkycedqba) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ibkycedqba) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ibkycedqba) .gt_left {
  text-align: left;
}

:where(#ibkycedqba) .gt_center {
  text-align: center;
}

:where(#ibkycedqba) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ibkycedqba) .gt_font_normal {
  font-weight: normal;
}

:where(#ibkycedqba) .gt_font_bold {
  font-weight: bold;
}

:where(#ibkycedqba) .gt_font_italic {
  font-style: italic;
}

:where(#ibkycedqba) .gt_super {
  font-size: 65%;
}

:where(#ibkycedqba) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ibkycedqba) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ibkycedqba) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ibkycedqba) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ibkycedqba) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ibkycedqba) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ibkycedqba) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="4" class="gt_heading gt_title gt_font_normal" style="">100 other occupational titles and codes</td>
    </tr>
    <tr>
      <td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">In the 1930 census</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Rank</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Code</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">NAPP Title</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">42258</td>
<td class="gt_row gt_left">torpägare träarbetare</td>
<td class="gt_row gt_right">61115</td>
<td class="gt_row gt_left">Husbandmen or cottars</td></tr>
    <tr><td class="gt_row gt_right">18628</td>
<td class="gt_row gt_left">chaufför bilrep verks</td>
<td class="gt_row gt_right">98510</td>
<td class="gt_row gt_left">Drivers, nec</td></tr>
    <tr><td class="gt_row gt_right">35895</td>
<td class="gt_row gt_left">reparatör te sj</td>
<td class="gt_row gt_right">84900</td>
<td class="gt_row gt_left">Others in machinery</td></tr>
    <tr><td class="gt_row gt_right">38207</td>
<td class="gt_row gt_left">småbrukare cementgjutare</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">28910</td>
<td class="gt_row gt_left">kettlerska textil</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">37953</td>
<td class="gt_row gt_left">skrivbiträde rådhuset</td>
<td class="gt_row gt_right">39310</td>
<td class="gt_row gt_left">Office clerks, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">40464</td>
<td class="gt_row gt_left">statkarl arbetare</td>
<td class="gt_row gt_right">62110</td>
<td class="gt_row gt_left">Farm workers, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">24563</td>
<td class="gt_row gt_left">hembiträde kassabiträde</td>
<td class="gt_row gt_right">54020</td>
<td class="gt_row gt_left">House servants nfs and maids</td></tr>
    <tr><td class="gt_row gt_right">12565</td>
<td class="gt_row gt_left">lagerbiträde järnskrotsaffär</td>
<td class="gt_row gt_right">97140</td>
<td class="gt_row gt_left">Porters</td></tr>
    <tr><td class="gt_row gt_right">16536</td>
<td class="gt_row gt_left">backstugusittare pension fattigv någ kap</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">10058</td>
<td class="gt_row gt_left">arbeterska arbetareänka</td>
<td class="gt_row gt_right">99150</td>
<td class="gt_row gt_left">Worker nfs</td></tr>
    <tr><td class="gt_row gt_right">23247</td>
<td class="gt_row gt_left">grovarbetare schaktmästare</td>
<td class="gt_row gt_right">99120</td>
<td class="gt_row gt_left">Labourers nfs</td></tr>
    <tr><td class="gt_row gt_right">15224</td>
<td class="gt_row gt_left">agent livförsäkringsbolaget trygg</td>
<td class="gt_row gt_right">43020</td>
<td class="gt_row gt_left">Commercial travellers</td></tr>
    <tr><td class="gt_row gt_right">41181</td>
<td class="gt_row gt_left">svarvare järnvverkst</td>
<td class="gt_row gt_right">83400</td>
<td class="gt_row gt_left">Machinists</td></tr>
    <tr><td class="gt_row gt_right">8278</td>
<td class="gt_row gt_left">gruvarbetare maskinborrare</td>
<td class="gt_row gt_right">71120</td>
<td class="gt_row gt_left">Miners</td></tr>
    <tr><td class="gt_row gt_right">24903</td>
<td class="gt_row gt_left">hemmansägare kap</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">9457</td>
<td class="gt_row gt_left">spinnare text</td>
<td class="gt_row gt_right">75200</td>
<td class="gt_row gt_left">Spinners, doublers, twisters and winders</td></tr>
    <tr><td class="gt_row gt_right">30253</td>
<td class="gt_row gt_left">köpmansänka pensionär</td>
<td class="gt_row gt_right">41010</td>
<td class="gt_row gt_left">Dealer, merchant etc. (Wholesale and retail trade)</td></tr>
    <tr><td class="gt_row gt_right">44727</td>
<td class="gt_row gt_left">vilthandlare agentur</td>
<td class="gt_row gt_right">41010</td>
<td class="gt_row gt_left">Dealer, merchant etc. (Wholesale and retail trade)</td></tr>
    <tr><td class="gt_row gt_right">32070</td>
<td class="gt_row gt_left">lantbrukslärare föreståndare jordbruksavdelning</td>
<td class="gt_row gt_right">13210</td>
<td class="gt_row gt_left">Teachers (unspecified)</td></tr>
    <tr><td class="gt_row gt_right">25834</td>
<td class="gt_row gt_left">husföreståndarinna köpmansänka</td>
<td class="gt_row gt_right">22160</td>
<td class="gt_row gt_left">Superintendents and managers, public utilities</td></tr>
    <tr><td class="gt_row gt_right">33039</td>
<td class="gt_row gt_left">maskinist ångfart</td>
<td class="gt_row gt_right">96230</td>
<td class="gt_row gt_left">Stationary engineers and engine men</td></tr>
    <tr><td class="gt_row gt_right">39464</td>
<td class="gt_row gt_left">spannmålsmagasinkarl</td>
<td class="gt_row gt_right">84190</td>
<td class="gt_row gt_left">Other machinery fitters and machine assemblers</td></tr>
    <tr><td class="gt_row gt_right">22713</td>
<td class="gt_row gt_left">generaldirektör</td>
<td class="gt_row gt_right">22110</td>
<td class="gt_row gt_left">Superintendents and managers nfs</td></tr>
    <tr><td class="gt_row gt_right">20481</td>
<td class="gt_row gt_left">fabriksarbetare kragsömmerska</td>
<td class="gt_row gt_right">99200</td>
<td class="gt_row gt_left">Factory labourers (unspecified)</td></tr>
    <tr><td class="gt_row gt_right">24909</td>
<td class="gt_row gt_left">hemmansägare kolare</td>
<td class="gt_row gt_right">74320</td>
<td class="gt_row gt_left">Charcoal burners</td></tr>
    <tr><td class="gt_row gt_right">25515</td>
<td class="gt_row gt_left">hovrättsnotarie skrivbiträde</td>
<td class="gt_row gt_right">12300</td>
<td class="gt_row gt_left">Notary</td></tr>
    <tr><td class="gt_row gt_right">8002</td>
<td class="gt_row gt_left">diversearbetare fabr</td>
<td class="gt_row gt_right">99120</td>
<td class="gt_row gt_left">Labourers nfs</td></tr>
    <tr><td class="gt_row gt_right">35127</td>
<td class="gt_row gt_left">plåtslagare järnverk</td>
<td class="gt_row gt_right">87320</td>
<td class="gt_row gt_left">Sheet metal worker, general</td></tr>
    <tr><td class="gt_row gt_right">42265</td>
<td class="gt_row gt_left">torpägareänka understödstagare</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">9608</td>
<td class="gt_row gt_left">tappningsbokhållare</td>
<td class="gt_row gt_right">33120</td>
<td class="gt_row gt_left">Bookkeepers and bookkeeping clerks</td></tr>
    <tr><td class="gt_row gt_right">24398</td>
<td class="gt_row gt_left">handsktvätterska</td>
<td class="gt_row gt_right">56000</td>
<td class="gt_row gt_left">Washing and laundry services</td></tr>
    <tr><td class="gt_row gt_right">33578</td>
<td class="gt_row gt_left">mekanikerarbetare plåtslagare</td>
<td class="gt_row gt_right">84130</td>
<td class="gt_row gt_left">Machine makers, builders and fitters</td></tr>
    <tr><td class="gt_row gt_right">29103</td>
<td class="gt_row gt_left">köksbiträde serveringsbiträde</td>
<td class="gt_row gt_right">53290</td>
<td class="gt_row gt_left">Other food and drink service workers</td></tr>
    <tr><td class="gt_row gt_right">17517</td>
<td class="gt_row gt_left">bokhållare trikåf</td>
<td class="gt_row gt_right">33120</td>
<td class="gt_row gt_left">Bookkeepers and bookkeeping clerks</td></tr>
    <tr><td class="gt_row gt_right">36942</td>
<td class="gt_row gt_left">sjömansänka hushållerska</td>
<td class="gt_row gt_right">52090</td>
<td class="gt_row gt_left">Other housekeeping service supervisors</td></tr>
    <tr><td class="gt_row gt_right">12765</td>
<td class="gt_row gt_left">målareänka tvätterska</td>
<td class="gt_row gt_right">93120</td>
<td class="gt_row gt_left">Painters, construction</td></tr>
    <tr><td class="gt_row gt_right">40960</td>
<td class="gt_row gt_left">studerande grovarbetare</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">2206</td>
<td class="gt_row gt_left">hemmansägarson</td>
<td class="gt_row gt_right">61110</td>
<td class="gt_row gt_left">General farmers and farmers nfs</td></tr>
    <tr><td class="gt_row gt_right">8595</td>
<td class="gt_row gt_left">jordbruksarbetare o hushållsarbetare</td>
<td class="gt_row gt_right">62110</td>
<td class="gt_row gt_left">Farm workers, specialisation unknown</td></tr>
    <tr><td class="gt_row gt_right">32828</td>
<td class="gt_row gt_left">månadskarl hjälp</td>
<td class="gt_row gt_right">99140</td>
<td class="gt_row gt_left">Day labourers (e.g journalier)</td></tr>
    <tr><td class="gt_row gt_right">25304</td>
<td class="gt_row gt_left">hemmason snickerilärling</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">39020</td>
<td class="gt_row gt_left">snickeriarbetare tillf</td>
<td class="gt_row gt_right">95420</td>
<td class="gt_row gt_left">Carpenters</td></tr>
    <tr><td class="gt_row gt_right">8636</td>
<td class="gt_row gt_left">kapphandlerska</td>
<td class="gt_row gt_right">41010</td>
<td class="gt_row gt_left">Dealer, merchant etc. (Wholesale and retail trade)</td></tr>
    <tr><td class="gt_row gt_right">9891</td>
<td class="gt_row gt_left">vitvaruaffärsbiträde</td>
<td class="gt_row gt_right">99999</td>
<td class="gt_row gt_left">NA</td></tr>
    <tr><td class="gt_row gt_right">23644</td>
<td class="gt_row gt_left">handelsbiträde husförestånderska</td>
<td class="gt_row gt_right">45130</td>
<td class="gt_row gt_left">Clerks in shops and stores</td></tr>
    <tr><td class="gt_row gt_right">8255</td>
<td class="gt_row gt_left">grovarbetare arrendator</td>
<td class="gt_row gt_right">99120</td>
<td class="gt_row gt_left">Labourers nfs</td></tr>
    <tr><td class="gt_row gt_right">19306</td>
<td class="gt_row gt_left">direktör v konsul</td>
<td class="gt_row gt_right">22110</td>
<td class="gt_row gt_left">Superintendents and managers nfs</td></tr>
    <tr><td class="gt_row gt_right">42541</td>
<td class="gt_row gt_left">träarbetare sliperiarbetare</td>
<td class="gt_row gt_right">73100</td>
<td class="gt_row gt_left">Wood treaters</td></tr>
    <tr><td class="gt_row gt_right">23031</td>
<td class="gt_row gt_left">grenadieränka charkuterihandlare</td>
<td class="gt_row gt_right">58410</td>
<td class="gt_row gt_left">Military, rank unknown</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>